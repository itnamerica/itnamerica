<div class="portal affiliates ta-center" ng-init="bindParamToVar('affiliates');getRidesData()">
  <div class="container" style="width:90%">
    
    <h2>ITN {{affiliateName}}</h2>

    <div class="row mt-50 mb-25">
      
      <div class="col-md-6">
        <h5>Official Website</h5>
        <a ng-href="https://www.itn{{affiliateName}}.org" target="_blank">www.itn{{affiliateName | lowercase}}.org</a>
      </div><!--col-md-6-->
      
      <div class="col-md-6 mb-25">
        <h5>Admin Dashboard</h5>
        <a ng-href="https://www.itn{{affiliateName}}.org/login" target="_blank">www.itn{{affiliateName | lowercase}}.org/login</a>  
        <div class="note-wrap">
          <h6><em>For accessing applications.<br>
             Email support@itnamerica.org for login info.</em></h6>
        </div>
      </div><!--col-md-6-->
      
    </div><!--row-->
    
    
    
    <div class="row mb-25">
      
      <div class="col-md-6 ta-center">
        <h5>Monthly Rides Data</h5>
        
        <table class="table table-responsive table-bordered ta-center" style="font-size:18px;font-weight:bold">
          <thead>
            <tr>
              <th>Total Rides</th>
              <th ng-if="affiliateName !== 'America'">Total Miles</th>
              <th>Current Members</th>
              <th ng-if="affiliateName === 'America'">Current Volunteers</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="affiliateData in ridesData | filter: {affiliateName: affiliateName}">
              <td>{{affiliateData.totalRideCount}}</td>
              <td ng-if="affiliateName !== 'America'">{{affiliateData.totalMiles}}</td>
              <td>{{affiliateData.totalActiveMembers}}</td>
              <th ng-if="affiliateName === 'America'">{{affiliateData.totalActiveVolunteers}}</th>
            </tr>
          </tbody>
        </table>
        
        <button type="button" ui-sref="rides" class="btn edit-btn btn-sm itn-orange-bg">
          <span class="glyphicon glyphicon-pencil"> Edit</span>
        </button>
        
      </div><!--col-md-6-->
      
      
      
      <div class="col-md-6 mb-25">
        <h5>Website Analytics</h5>

        <div class="ga-wrap" style="display:block;width:80%;margin:auto">
          <section id="auth-button"></section>
          <section id="view-selector"></section>
          <section id="timeline"></section>
        </div>

      </div><!--col-md-6-->
    </div><!--row-->
    
    
    
    <div class="row mt-25 mb-50">
      <div class="col-md-2"></div>
      
      <div class="col-md-8">
        <h5>Comments</h5>
        (api GET call to website comments)
        (api ADD and DELETE call for website comments)
      </div>
      
      <div class="col-md-2"></div>
    </div><!--row-->



  </div><!--container-->
</div><!--affiliates-->



<div class="back-btn-wrap">
  <a ng-click="openAdditionalPage('affiliateLanding')" ng-hide="showPortal" class="back-btn">
    <h3>Back to Previous Page</h3>
  </a>
  <a ng-click="openAdditionalPage('portal')" class="back-btn">
    <h3>Back to Portal</h3>
  </a>
</div>




<!-- Step 2: Load the library. -->

<script>
(function(w,d,s,g,js,fjs){
  g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(cb){this.q.push(cb)}};
  js=d.createElement(s);fjs=d.getElementsByTagName(s)[0];
  js.src='https://apis.google.com/js/platform.js';
  fjs.parentNode.insertBefore(js,fjs);js.onload=function(){g.load('analytics')};
}(window,document,'script'));
</script>

<script>
gapi.analytics.ready(function() {

  // Step 3: Authorize the user.

  var CLIENT_ID = '633525844243-1r4ea74q27960sf6l7abko81l1o4tvoj.apps.googleusercontent.com';

  gapi.analytics.auth.authorize({
    container: 'auth-button',
    clientid: CLIENT_ID,
  });

  // Step 4: Create the view selector.

  var viewSelector = new gapi.analytics.ViewSelector({
    container: 'view-selector'
  });

  // Step 5: Create the timeline chart.

  var timeline = new gapi.analytics.googleCharts.DataChart({
    reportType: 'ga',
    query: {
      'dimensions': 'ga:date',
      'metrics': 'ga:sessions',
      'start-date': '30daysAgo',
      'end-date': 'yesterday',
    },
    chart: {
      type: 'LINE',
      container: 'timeline'
    }
  });

  // Step 6: Hook up the components to work together.

  gapi.analytics.auth.on('success', function(response) {
    viewSelector.execute();
  });

  viewSelector.on('change', function(ids) {
    var newIds = {
      query: {
        ids: ids
      }
    }
    timeline.set(newIds).execute();
  });
});
</script>


<!-- affiliate page

for each affiliate (make page dynamic)

-link to website
-link to dashboard
-rides data
-analytics (embed?)
-comment section (directive?) -->
  
